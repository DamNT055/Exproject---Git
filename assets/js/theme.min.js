"use strict";
!(function () {
  if (
    ($(".dropdown-menu a.dropdown-toggle").length &&
      $(".dropdown-menu a.dropdown-toggle").on("click", function (e) {
        return (
          $(this).next().hasClass("show") ||
            $(this)
              .parents(".dropdown-menu")
              .first()
              .find(".show")
              .removeClass("show"),
          $(this).next(".dropdown-menu").toggleClass("show"),
          $(this)
            .parents("li.nav-item.dropdown.show")
            .on("hidden.bs.dropdown", function (e) {
              $(".dropdown-submenu .show").removeClass("show");
            }),
          !1
        );
      }),
    $('[data-bs-toggle="tooltip"]').length)
  )
    [].slice
      .call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
      .map(function (e) {
        return new bootstrap.Tooltip(e);
      });
  if ($('[data-bs-toggle="popover"]').length)
    [].slice
      .call(document.querySelectorAll('[data-bs-toggle="popover"]'))
      .map(function (e) {
        return new bootstrap.Popover(e);
      });
  if ($("#rater").length)
    raterJs({
      starSize: 20,
      element: document.querySelector("#rater"),
      rateCallback: function (e, t) {
        this.setRating(e), t();
      },
    });
  if ($("#rate-2").length)
    raterJs({
      starSize: 20,
      element: document.querySelector("#rate-2"),
      rateCallback: function (e, t) {
        this.setRating(e), t();
      },
    });
  if ($("#rate-3").length)
    raterJs({
      starSize: 20,
      element: document.querySelector("#rate-3"),
      rateCallback: function (e, t) {
        this.setRating(e), t();
      },
    });
  if ($("#rate-4").length)
    raterJs({
      starSize: 20,
      element: document.querySelector("#rate-4"),
      rateCallback: function (e, t) {
        this.setRating(e), t();
      },
    });
  if (
    ($(".sidebar-nav-fixed a").length &&
      $(".sidebar-nav-fixed a").on("click", function (e) {
        if (
          location.pathname.replace(/^\//, "") ==
            this.pathname.replace(/^\//, "") &&
          location.hostname == this.hostname
        ) {
          var t = $(this.hash);
          (t = t.length ? t : $("[name=" + this.hash.slice(1) + "]")).length &&
            (e.preventDefault(),
            $("html, body").animate(
              { scrollTop: t.offset().top - 90 },
              1e3,
              function () {
                var e = $(t);
                if ((e.focus(), e.is(":focus"))) return !1;
                e.attr("tabindex", "-1"), e.focus();
              }
            ));
        }
        $(".sidebar-nav-fixed a").each(function () {
          $(this).removeClass("active");
        }),
          $(this).addClass("active");
      }),
    $(".flatpickr").length && flatpickr(".flatpickr", { disableMobile: !0 }),
    $(".stopevent").length &&
      $(document).on("click.bs.collapse.data-api", ".stopevent", function (e) {
        e.stopPropagation();
      }),
    $("#checkAll").length &&
      $("#checkAll").on("click", function () {
        $("input:checkbox").not(this).prop("checked", this.checked);
      }),
    $("#liveAlertPlaceholder").length)
  ) {
    const e = document.getElementById("liveAlertPlaceholder"),
      t = (t, n) => {
        const a = document.createElement("div");
        (a.innerHTML = [
          `<div class="alert alert-${n} alert-dismissible" role="alert">`,
          `   <div>${t}</div>`,
          '   <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>',
          "</div>",
        ].join("")),
          e.append(a);
      },
      n = document.getElementById("liveAlertBtn");
    n &&
      n.addEventListener("click", () => {
        t("Nice, you triggered this alert message!", "success");
      });
  }
  if ($("#priceRange").length) {
    var e = document.getElementById("priceRange");
    noUiSlider.create(e, {
      connect: !0,
      behaviour: "tap",
      start: [30000, 150000],
      range: { min: [10000], max: [200000] },
      format: wNumb({ decimals: 1, thousand: ".", suffix: "đ" }),
    });
    var t = document.getElementById("priceRange-value");
    e.noUiSlider.on("update", function (e) {
      t.innerHTML = e.join(" - ");
    });
  }
  $(".file-input").length &&
    $(".file-input").change(function () {
      var e = $(this).parent().parent().find(".image");
      console.log(e);
      var t = new FileReader();
      (t.onload = function (t) {
        e.attr("src", t.target.result);
      }),
        t.readAsDataURL(this.files[0]);
    });
})();

function showErrorMessage(msg, timeOUTDELAY = 4000) {
  var dateTime = new Date().getTime();
  /**
  $(
    '<div id="alert_' +
      dateTime +
      '" class="alert alert-danger alert-dismissible"><button onclick="dismissErrorMessage(' +
      dateTime +
      ')" type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>' +
      msg +
      "</div>"
  )
    .prependTo("#alertBody")
    .fadeIn();
 */
  $(
    '<div id="alert_' +
      dateTime +
      '" class="toast align-items-center text-white bg-danger border-0 my-1" role="alert" aria-live="assertive" aria-atomic="true">' +
      '<div class="d-flex">' +
      '<div class="toast-body pe-0">' +
      msg +
      "</div>" +
      '<button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>' +
      "</div>" +
      "</div>"
  )
    .prependTo("#alertBody")
    .fadeIn();

  setTimeout(function () {
    dismissErrorMessage(dateTime);
  }, timeOUTDELAY);
}
function showOkMessage(msg, timeOUTDELAY = 4000) {
  var dateTime = new Date().getTime();
  /* 
  $(
    '<div id="alert_' +
      dateTime +
      '" class="alert alert-success alert-dismissible"><button onclick="dismissErrorMessage(' +
      dateTime +
      ')" type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>' +
      msg +
      "</div>"
  )
    .prependTo("#alertBody")
    .fadeIn();
  */
  $(
    '<div id="alert_' +
      dateTime +
      '" class="toast align-items-center text-white bg-primary border-0 my-1" role="alert" aria-live="assertive" aria-atomic="true">' +
      '<div class="d-flex">' +
      '<div class="toast-body pe-0">' +
      msg +
      "</div>" +
      '<button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>' +
      "</div>" +
      "</div>"
  )
    .prependTo("#alertBody")
    .fadeIn();
  setTimeout(function () {
    dismissErrorMessage(dateTime);
  }, timeOUTDELAY);
}
function dismissErrorMessage(id) {
  $("#alert_" + id).fadeOut();
}
function addCommas(nStr, split_tag = !1) {
  if (nStr == null) return 0;
  var extent = "";
  if (split_tag) {
    extent = " đ";

    if ($(window).width() < 700) {
      if (nStr > 1000000000) {
        nStr = Math.round((nStr * 10) / 1000000000) / 10;
        extent = " tỷ";
      } else if (nStr > 1000000) {
        nStr = Math.round((nStr * 10) / 1000000) / 10;
        extent = " tr";
      } else if (nStr > 1000) {
        nStr = Math.round((nStr * 10) / 1000) / 10;
        extent = " k";
      } else {
        extent = " đ";
      }
    }
  }
  nStr += "";
  var x = nStr.split(",");
  var x1 = x[0];
  var x2 = x.length > 1 ? "," + x[1] : "";
  var rgx = /(\d+)(\d{3})/;
  while (rgx.test(x1)) {
    x1 = x1.replace(rgx, "$1" + "," + "$2");
  }
  return x1 + x2 + extent;
}
